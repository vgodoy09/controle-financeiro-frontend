{"remainingRequest":"/home/victorgodoy/Área de Trabalho/app/workspace-sts/controle-financeiro-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/victorgodoy/Área de Trabalho/app/workspace-sts/controle-financeiro-frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/victorgodoy/Área de Trabalho/app/workspace-sts/controle-financeiro-frontend/src/App.vue","mtime":1550801742139},{"path":"/home/victorgodoy/Área de Trabalho/app/workspace-sts/controle-financeiro-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/victorgodoy/Área de Trabalho/app/workspace-sts/controle-financeiro-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/victorgodoy/Área de Trabalho/app/workspace-sts/controle-financeiro-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/victorgodoy/Área de Trabalho/app/workspace-sts/controle-financeiro-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//mapeamento de objetos gerais\nimport { mapState } from \"vuex\";\nimport { baseApiUrl } from \"@/global\";\n//cliente http\nimport axios from \"axios\";\n//eventos\nimport { EventBusLogged } from \"@/eventBus/eventBusLogged\";\n//componentes\nimport Header from \"@/components/template/Header\";\nimport Content from \"@/components/template/Content\";\nimport Footer from \"@/components/template/Footer\";\nimport Login from \"@/components/auth/Login\";\n\nexport default {\n  name: \"App\",\n  computed: mapState([\"isLogged\"]),\n  components: { Header, Content, Footer, Login },\n  data() {\n    return {\n      loading: true\n    };\n  },\n  methods: {\n    async logged() {\n      this.loading = true;\n      const token = sessionStorage.getItem(\"token\");\n      const user = sessionStorage.getItem(\"user\");\n      console.log(this)\n      this.$store.commit(\"ADD_ISLOGGED\", false);\n      if (token && user) {\n        axios.post(`${baseApiUrl}/checkLogged`, { login: user, token: token }).then(resp => {\n            if (!resp.data.error) {\n              this.$store.commit(\"ADD_USER_CONTEXT\", resp.data.userContext);\n              this.$store.commit(\"ADD_ISLOGGED\", true);\n            }\n            this.loading = false;\n          });\n      } else {\n        this.$router.push({ name: \"admin\" });\n        this.loading = false;\n      }\n    }\n  },\n  mounted() {\n    this.logged();\n    //evento de recarregar informações do usuário logado\n    EventBusLogged.$on(\"refreshLogged\", () => {\n      this.logged();\n    });\n  }\n};\n",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div class=\"app\">\n    <!-- conteúdo geral -->\n    <Header v-if=\"!loading && isLogged\"/>\n    <Content v-if=\"!loading && isLogged\"/>\n    <Footer v-if=\"!loading && isLogged\"/>\n    <!-- fim -->\n\n    <!-- página de login-->\n    <Login class=\"application-login\" v-if=\"!loading && !isLogged\"/>\n    <!-- carregamento da tela-->\n    <!-- Carregamento-->\n    <div v-if=\"loading\" class=\"application-center-load-login\">\n      <img src=\"@/assets/save-form.gif\" alt=\"Carregando\">\n    </div>\n  </div>\n</template>\n\n<script>\n//mapeamento de objetos gerais\nimport { mapState } from \"vuex\";\nimport { baseApiUrl } from \"@/global\";\n//cliente http\nimport axios from \"axios\";\n//eventos\nimport { EventBusLogged } from \"@/eventBus/eventBusLogged\";\n//componentes\nimport Header from \"@/components/template/Header\";\nimport Content from \"@/components/template/Content\";\nimport Footer from \"@/components/template/Footer\";\nimport Login from \"@/components/auth/Login\";\n\nexport default {\n  name: \"App\",\n  computed: mapState([\"isLogged\"]),\n  components: { Header, Content, Footer, Login },\n  data() {\n    return {\n      loading: true\n    };\n  },\n  methods: {\n    async logged() {\n      this.loading = true;\n      const token = sessionStorage.getItem(\"token\");\n      const user = sessionStorage.getItem(\"user\");\n      console.log(this)\n      this.$store.commit(\"ADD_ISLOGGED\", false);\n      if (token && user) {\n        axios.post(`${baseApiUrl}/checkLogged`, { login: user, token: token }).then(resp => {\n            if (!resp.data.error) {\n              this.$store.commit(\"ADD_USER_CONTEXT\", resp.data.userContext);\n              this.$store.commit(\"ADD_ISLOGGED\", true);\n            }\n            this.loading = false;\n          });\n      } else {\n        this.$router.push({ name: \"admin\" });\n        this.loading = false;\n      }\n    }\n  },\n  mounted() {\n    this.logged();\n    //evento de recarregar informações do usuário logado\n    EventBusLogged.$on(\"refreshLogged\", () => {\n      this.logged();\n    });\n  }\n};\n</script>\n\n\n<style>\n* {\n  font-family: \"Lato\", sans-serif;\n}\n\nbody {\n  margin: 0;\n}\n\n.app {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100vh;\n  display: grid;\n  grid-template-rows: 60px 1fr 40px;\n  grid-template-columns: 100%;\n  grid-template-areas:\n    \"header header\"\n    \"content content\"\n    \"footer footer\";\n}\n\n</style>"]}]}